!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e){t.exports=rxjs/operators},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(6),i=function(){function t(t,e){this.name=t,this._db=e}return t.prototype.clear=function(){var t=this;return this.tx("readwrite").pipe(n.map(function(e){return e.objectStore(t.name)}),n.map(function(t){return t.clear()}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.delete=function(t){var e=this;return this.tx("readwrite").pipe(n.map(function(t){return t.objectStore(e.name)}),n.map(function(e){return e.delete(t)}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.get=function(t){var e=this;return this.tx().pipe(n.map(function(t){return t.objectStore(e.name)}),n.map(function(e){return e.get(t)}),n.switchMap(function(t){return o.rxifyRequest(t)}),o.resultFromIDBEvent)},t.prototype.set=function(t,e){var r=this;return this.tx("readwrite").pipe(n.map(function(t){return t.objectStore(r.name)}),n.map(function(r){return r.put(t,e)}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.tx=function(t){return void 0===t&&(t="readonly"),this._db.tx(this.name,t)},t}();e.RxIDBStore=i},function(t,e){t.exports=rxjs},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=function(){function t(t,e){this._rxidb=t,this._event=e,this.db=e.target.result,this.oldVersion=e.oldVersion,this.version=e.newVersion}return t.prototype.create=function(t,e){var r=this.db.createObjectStore(t,e);return new c(t,this._rxidb,r)},t.prototype.delete=function(t){this.db.deleteObjectStore(t)},t.prototype.has=function(t){return this.db.objectStoreNames.contains(t)},t}();e.RxIDBUpgrade=u;var c=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o._name=e,o._rxidb=r,o._store=n,o}return o(e,t),e.prototype.createIndex=function(t,e,r){return this._store.createIndex(t,e,r)},e.prototype.fill=function(t){var e=this;return Array.from(t).forEach(function(t){return e._store.put(t)}),this},e}(i.RxIDBStore);e.RxIDBUpgradeStore=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=r(0),i=r(1),u=function(){function t(t){this.idb=t}return t.prototype.close=function(){this.idb.close()},t.prototype.get=function(t){return new i.RxIDBStore(t,this)},t.prototype.tx=function(t,e){var r=this;return void 0===e&&(e="readonly"),n.of(null).pipe(o.map(function(){return r.idb.transaction(t,e)}))},t.prototype.transaction=function(t,e){return void 0===e&&(e="readonly"),this.idb.transaction(t,e)},t}();e.RxIDB=u},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),u=r(0),c=r(4),a=r(3);function s(t,e,r){var n,o=new i.Subject,s=new i.Subject,p=indexedDB.open(t,e);return p.onerror=function(t){return o.error(t)},p.onblocked=function(t){return o.error(t)},p.onsuccess=function(t){n=n||new c.RxIDB(t.target.result),o.next(n),o.complete(),e===n.idb.version&&(s.next(),s.complete())},p.onupgradeneeded=function(t){n=n||new c.RxIDB(t.target.result),f(new a.RxIDBUpgrade(n,t),r).subscribe(function(){return s.next()},function(t){return s.error(t)},function(){return s.complete()})},i.forkJoin([o,s]).pipe(u.map(function(){return n}))}function f(t,e){return e&&e.length?i.forkJoin(e.map(function(e){return p(t,e)})):i.of(null)}function p(t,e){void 0===e&&(e=new Map);var r,u,c=t.oldVersion,a=[i.of(!0)];try{for(var s=n(e),f=s.next();!f.done;f=s.next()){var p=o(f.value,2),l=p[0],d=p[1];if(c<l){var v=d(t);v instanceof i.Observable&&a.push(v)}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(u=s.return)&&u.call(s)}finally{if(r)throw r.error}}return a}function l(t){return i.Observable.create(function(e){var r=indexedDB.deleteDatabase(t);r.onblocked=function(t){return e.error(t)},r.onsuccess=function(){return e.next(void 0)},r.onerror=function(t){return e.error(t)}}).pipe(u.take(1))}e.open=s,e.onUpgradeEnded=f,e.setupLayers=p,e.drop=l,e.rxidb={open:s,drop:l}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=r(0);e.rxifyRequest=function(t){var e=new n.Subject;return t.onerror=function(t){return e.error(t)},t.onsuccess=function(t){return e.next(t)},e},e.resultFromIDBEvent=function(t){return t.pipe(o.map(function(t){return t.target.result}))}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0});var o=r(5);n(r(4)),n(r(5)),n(r(1)),n(r(3)),e.default=o.rxidb}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicnhqcy9vcGVyYXRvcnNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvcnhpZGItc3RvcmUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicnhqc1wiIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi11cGdyYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi1kYi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcnhpZGItc3RhdGljLnRzIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi11dGlscy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicnhqcyIsIm9wZXJhdG9ycyIsIm9wZXJhdG9yc18xIiwicnhpZGJfdXRpbHNfMSIsIlJ4SURCU3RvcmUiLCJfZGIiLCJ0aGlzIiwiY2xlYXIiLCJfdGhpcyIsInR4IiwicGlwZSIsIm1hcCIsIm9iamVjdFN0b3JlIiwic3RvcmUiLCJzd2l0Y2hNYXAiLCJyZXEiLCJyeGlmeVJlcXVlc3QiLCJtYXBUbyIsInVuZGVmaW5lZCIsImRlbGV0ZSIsImtleSIsInJlc3VsdEZyb21JREJFdmVudCIsInNldCIsInB1dCIsIm1vZGUiLCJyeGlkYl9zdG9yZV8xIiwiUnhJREJVcGdyYWRlIiwiX3J4aWRiIiwiX2V2ZW50IiwiZGIiLCJ0YXJnZXQiLCJyZXN1bHQiLCJvbGRWZXJzaW9uIiwidmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJjcmVhdGUiLCJvcHRpb25zIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJSeElEQlVwZ3JhZGVTdG9yZSIsImRlbGV0ZU9iamVjdFN0b3JlIiwiaGFzIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiX3N1cGVyIiwiX25hbWUiLCJfc3RvcmUiLCJfX2V4dGVuZHMiLCJjcmVhdGVJbmRleCIsImtleXBhdGgiLCJwYXJhbXMiLCJmaWxsIiwiZW50cmllcyIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJlbnRyeSIsInJ4anNfMSIsIlJ4SURCIiwiaWRiIiwiY2xvc2UiLCJvZiIsInRyYW5zYWN0aW9uIiwicnhpZGJfZGJfMSIsInJ4aWRiX3VwZ3JhZGVfMSIsIm9wZW4iLCJkYk5hbWUiLCJkYlZlcnNpb24iLCJzdG9yZXMiLCJyeElEQiIsImRiJCIsIlN1YmplY3QiLCJ1cGdyYWRlJCIsInJlcXVlc3QiLCJpbmRleGVkREIiLCJvbmVycm9yIiwiZSIsImVycm9yIiwib25ibG9ja2VkIiwib25zdWNjZXNzIiwiZXZlbnQiLCJuZXh0IiwiY29tcGxldGUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvblVwZ3JhZGVFbmRlZCIsInN1YnNjcmliZSIsImZvcmtKb2luIiwicnhJREJVcGdyYWRlIiwibGVuZ3RoIiwibGF5ZXJzIiwic2V0dXBMYXllcnMiLCJNYXAiLCJvYnNlcnZhYmxlcyIsImxheWVyc18xIiwiX192YWx1ZXMiLCJsYXllcnNfMV8xIiwiZG9uZSIsIl9hIiwiX19yZWFkIiwibGF5ZXJWZXJzaW9uIiwibGF5ZXJJbnN0YWxsZXIiLCJPYnNlcnZhYmxlIiwicHVzaCIsImRyb3AiLCJvYnNlcnZlciIsImRlbGV0ZURhdGFiYXNlIiwidGFrZSIsInJ4aWRiIiwicmVxdWVzdCQiLCJzb3VyY2UiLCJyeGlkYl9zdGF0aWNfMSIsIl9fZXhwb3J0IiwiZGVmYXVsdCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEs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ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJ4anMvb3BlcmF0b3JzOyIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCwgc3dpdGNoTWFwLCBtYXBUbyB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgUnhJREIgfSBmcm9tICcuL3J4aWRiLWRiJztcbmltcG9ydCB7IElSeElEQlN0b3JlIH0gZnJvbSAnLi9yeGlkYi5pbnRlcmZhY2VzJztcbmltcG9ydCB7IHJ4aWZ5UmVxdWVzdCwgcmVzdWx0RnJvbUlEQkV2ZW50IH0gZnJvbSAnLi9yeGlkYi11dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBSeElEQlN0b3JlPFRWYWx1ZSBleHRlbmRzIGFueSwgVEtleSBleHRlbmRzIElEQlZhbGlkS2V5PiBpbXBsZW1lbnRzIElSeElEQlN0b3JlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIF9kYjogUnhJREJcbiAgKSB7IH1cblxuICBwdWJsaWMgY2xlYXIoKTogT2JzZXJ2YWJsZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMudHgoJ3JlYWR3cml0ZScpLnBpcGUoXG4gICAgICBtYXAoKHR4KSA9PiB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpKSxcbiAgICAgIG1hcCgoc3RvcmUpID0+IHN0b3JlLmNsZWFyKCkpLFxuICAgICAgc3dpdGNoTWFwKHJlcSA9PiByeGlmeVJlcXVlc3QocmVxKSksXG4gICAgICBtYXBUbyh1bmRlZmluZWQpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUoa2V5OiBUS2V5KTogT2JzZXJ2YWJsZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMudHgoJ3JlYWR3cml0ZScpLnBpcGUoXG4gICAgICBtYXAoKHR4KSA9PiB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpKSxcbiAgICAgIG1hcCgoc3RvcmUpID0+IHN0b3JlLmRlbGV0ZShrZXkpKSxcbiAgICAgIHN3aXRjaE1hcChyZXEgPT4gcnhpZnlSZXF1ZXN0KHJlcSkpLFxuICAgICAgbWFwVG8odW5kZWZpbmVkKVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0KGtleTogVEtleSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMudHgoKS5waXBlKFxuICAgICAgbWFwKCh0eCkgPT4gdHgub2JqZWN0U3RvcmUodGhpcy5uYW1lKSksXG4gICAgICBtYXAoc3RvcmUgPT4gc3RvcmUuZ2V0KGtleSkpLFxuICAgICAgc3dpdGNoTWFwKHJlcSA9PiByeGlmeVJlcXVlc3QocmVxKSksXG4gICAgICByZXN1bHRGcm9tSURCRXZlbnRcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHNldCh2YWx1ZTogVFZhbHVlLCBrZXk/OiBUS2V5KTogT2JzZXJ2YWJsZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMudHgoJ3JlYWR3cml0ZScpLnBpcGUoXG4gICAgICBtYXAoKHR4KSA9PiB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpKSxcbiAgICAgIG1hcChzdG9yZSA9PiBzdG9yZS5wdXQodmFsdWUsIGtleSkpLFxuICAgICAgc3dpdGNoTWFwKHJlcSA9PiByeGlmeVJlcXVlc3QocmVxKSksXG4gICAgICBtYXBUbyh1bmRlZmluZWQpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyB0eChtb2RlOiAncmVhZG9ubHknIHwgJ3JlYWR3cml0ZScgPSAncmVhZG9ubHknKTogT2JzZXJ2YWJsZTxJREJUcmFuc2FjdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLl9kYi50eCh0aGlzLm5hbWUsIG1vZGUpO1xuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJ4anM7IiwiaW1wb3J0IHsgUnhJREIgfSBmcm9tICcuL3J4aWRiLWRiJztcbmltcG9ydCB7IFJ4SURCU3RvcmUgfSBmcm9tICcuL3J4aWRiLXN0b3JlJztcbmltcG9ydCB7IElSeElEQlVwZ3JhZGUgfSBmcm9tICcuL3J4aWRiLmludGVyZmFjZXMnO1xuXG5leHBvcnQgY2xhc3MgUnhJREJVcGdyYWRlIGltcGxlbWVudHMgSVJ4SURCVXBncmFkZSB7XG4gIHB1YmxpYyByZWFkb25seSBkYjogSURCRGF0YWJhc2U7XG4gIHB1YmxpYyByZWFkb25seSBvbGRWZXJzaW9uOiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSB2ZXJzaW9uOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IgKFxuICAgIHByaXZhdGUgX3J4aWRiOiBSeElEQixcbiAgICBwcml2YXRlIF9ldmVudDogYW55XG4gICkge1xuICAgIHRoaXMuZGIgICAgICAgICA9IF9ldmVudC50YXJnZXQucmVzdWx0O1xuICAgIHRoaXMub2xkVmVyc2lvbiA9IF9ldmVudC5vbGRWZXJzaW9uO1xuICAgIHRoaXMudmVyc2lvbiAgICA9IF9ldmVudC5uZXdWZXJzaW9uO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IElEQk9iamVjdFN0b3JlUGFyYW1ldGVycyk6IFJ4SURCVXBncmFkZVN0b3JlIHtcbiAgICBsZXQgc3RvcmUgPSB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKG5hbWUsIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXcgUnhJREJVcGdyYWRlU3RvcmUobmFtZSwgdGhpcy5fcnhpZGIsIHN0b3JlKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUobmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5kYi5kZWxldGVPYmplY3RTdG9yZShuYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXMobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhuYW1lKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUnhJREJVcGdyYWRlU3RvcmUgZXh0ZW5kcyBSeElEQlN0b3JlPGFueSwgSURCVmFsaWRLZXk+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nLFxuICAgIHByaXZhdGUgX3J4aWRiOiBSeElEQixcbiAgICBwcml2YXRlIF9zdG9yZTogSURCT2JqZWN0U3RvcmVcbiAgKSB7XG4gICAgc3VwZXIoX25hbWUsIF9yeGlkYik7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGluZGV4XG4gICAqL1xuICBwdWJsaWMgY3JlYXRlSW5kZXgobmFtZTogc3RyaW5nLCBrZXlwYXRoOiBzdHJpbmcsIHBhcmFtcz86IElEQkluZGV4UGFyYW1ldGVycyk6IElEQkluZGV4IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUuY3JlYXRlSW5kZXgobmFtZSwga2V5cGF0aCwgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxsIERCIHdpdGggZW50cmllc1xuICAgKi9cbiAgcHVibGljIGZpbGwoZW50cmllczogSXRlcmFibGU8YW55Pik6IHRoaXMge1xuICAgIEFycmF5LmZyb20oZW50cmllcykuZm9yRWFjaChlbnRyeSA9PiB0aGlzLl9zdG9yZS5wdXQoZW50cnkpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgSVJ4SURCIH0gZnJvbSAnLi9yeGlkYi5pbnRlcmZhY2VzJztcbmltcG9ydCB7IFJ4SURCU3RvcmUgfSBmcm9tICcuL3J4aWRiLXN0b3JlJztcblxuZXhwb3J0IGNsYXNzIFJ4SURCIGltcGxlbWVudHMgSVJ4SURCIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIHB1YmxpYyByZWFkb25seSBpZGI6IElEQkRhdGFiYXNlXG4gICkge31cblxuICAvKipcbiAgICogQ2xvc2UgZGJcbiAgICovXG4gIHB1YmxpYyBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlkYi5jbG9zZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmVhbTogZ2V0IHN0b3JlXG4gICAqL1xuICBwdWJsaWMgZ2V0KGtleTogc3RyaW5nKTogUnhJREJTdG9yZTxhbnksIElEQlZhbGlkS2V5PiB7XG4gICAgcmV0dXJuIG5ldyBSeElEQlN0b3JlKGtleSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU3RyZWFtOiBJREJUcmFuc2FjdGlvblxuICAgKi9cbiAgcHVibGljIHR4KHN0b3JlOiBzdHJpbmcgfCBzdHJpbmdbXSwgbW9kZTogJ3JlYWRvbmx5JyB8ICdyZWFkd3JpdGUnID0gJ3JlYWRvbmx5Jyk6IE9ic2VydmFibGU8SURCVHJhbnNhY3Rpb24+IHtcbiAgICByZXR1cm4gb2YobnVsbCkucGlwZShcbiAgICAgIG1hcCgoKSA9PiB0aGlzLmlkYi50cmFuc2FjdGlvbihzdG9yZSwgbW9kZSkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIElEQlRyYW5zYWN0aW9uXG4gICAqL1xuICBwdWJsaWMgdHJhbnNhY3Rpb24oc3RvcmU6IHN0cmluZ3xzdHJpbmdbXSwgbW9kZTogJ3JlYWRvbmx5J3wncmVhZHdyaXRlJyA9ICdyZWFkb25seScpOiBJREJUcmFuc2FjdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuaWRiLnRyYW5zYWN0aW9uKHN0b3JlLCBtb2RlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZm9ya0pvaW4sIFN1YmplY3QsIGZyb20sIG9mLCBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZSwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBSeElEQiB9IGZyb20gJy4vcnhpZGItZGInO1xuaW1wb3J0IHsgUnhJREJMYXllcnMgfSBmcm9tICcuL3J4aWRiLnR5cGVzJztcbmltcG9ydCB7IFJ4SURCVXBncmFkZSB9IGZyb20gJy4vcnhpZGItdXBncmFkZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuKGRiTmFtZTogc3RyaW5nLCBkYlZlcnNpb246IG51bWJlciwgc3RvcmVzPzogUnhJREJMYXllcnNbXSk6IE9ic2VydmFibGU8UnhJREI+IHtcbiAgbGV0IGRiJDogU3ViamVjdDxSeElEQj4gPSBuZXcgU3ViamVjdCgpO1xuICBsZXQgdXBncmFkZSQ6IFN1YmplY3Q8dm9pZD4gPSBuZXcgU3ViamVjdCgpO1xuICBsZXQgcmVxdWVzdDogSURCT3BlbkRCUmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKGRiTmFtZSwgZGJWZXJzaW9uKTtcbiAgbGV0IHJ4SURCOiBSeElEQjtcblxuICByZXF1ZXN0Lm9uZXJyb3IgICAgICAgICA9IChlOiBhbnkpID0+IGRiJC5lcnJvcihlKTtcbiAgcmVxdWVzdC5vbmJsb2NrZWQgICAgICAgPSAoZTogYW55KSA9PiBkYiQuZXJyb3IoZSk7XG4gIHJlcXVlc3Qub25zdWNjZXNzICAgICAgID0gKGV2ZW50OiBhbnkpID0+IHtcbiAgICByeElEQiA9IHJ4SURCIHx8IG5ldyBSeElEQihldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICBkYiQubmV4dChyeElEQik7XG4gICAgZGIkLmNvbXBsZXRlKCk7XG5cbiAgICBpZiAoZGJWZXJzaW9uID09PSByeElEQi5pZGIudmVyc2lvbikge1xuICAgICAgdXBncmFkZSQubmV4dCgpO1xuICAgICAgdXBncmFkZSQuY29tcGxldGUoKTtcbiAgICB9XG4gIH07XG4gIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50OiBhbnkpID0+IHtcbiAgICByeElEQiA9IHJ4SURCIHx8IG5ldyBSeElEQihldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICBvblVwZ3JhZGVFbmRlZChuZXcgUnhJREJVcGdyYWRlKHJ4SURCLCBldmVudCksIHN0b3Jlcykuc3Vic2NyaWJlKFxuICAgICAgKCkgPT4gdXBncmFkZSQubmV4dCgpLFxuICAgICAgKGUpID0+IHVwZ3JhZGUkLmVycm9yKGUpLFxuICAgICAgKCkgPT4gdXBncmFkZSQuY29tcGxldGUoKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIGZvcmtKb2luKFtkYiQsIHVwZ3JhZGUkXSkucGlwZShcbiAgICBtYXAoKCkgPT4gcnhJREIpXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvblVwZ3JhZGVFbmRlZChyeElEQlVwZ3JhZGU6IFJ4SURCVXBncmFkZSwgc3RvcmVzPzogUnhJREJMYXllcnNbXSk6IE9ic2VydmFibGU8YW55PiB7XG4gIGlmICghc3RvcmVzIHx8ICFzdG9yZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG9mKG51bGwpO1xuICB9XG5cbiAgcmV0dXJuIGZvcmtKb2luKHN0b3Jlcy5tYXAobGF5ZXJzID0+IHNldHVwTGF5ZXJzKHJ4SURCVXBncmFkZSwgbGF5ZXJzKSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBMYXllcnMocnhJREJVcGdyYWRlOiBSeElEQlVwZ3JhZGUsIGxheWVyczogUnhJREJMYXllcnMgPSBuZXcgTWFwKCkpOiBPYnNlcnZhYmxlPGFueT5bXSB7XG4gIGxldCB7IG9sZFZlcnNpb24gfSA9IHJ4SURCVXBncmFkZTtcbiAgbGV0IG9ic2VydmFibGVzOiBPYnNlcnZhYmxlPGFueT5bXSA9IFtvZih0cnVlKV07XG5cbiAgZm9yIChjb25zdCBbbGF5ZXJWZXJzaW9uLCBsYXllckluc3RhbGxlcl0gb2YgbGF5ZXJzKSB7XG4gICAgaWYgKG9sZFZlcnNpb24gPCBsYXllclZlcnNpb24pIHtcbiAgICAgIGxldCByZXN1bHQgPSBsYXllckluc3RhbGxlcihyeElEQlVwZ3JhZGUpO1xuXG4gICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xuICAgICAgICBvYnNlcnZhYmxlcy5wdXNoKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9ic2VydmFibGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJvcChkYk5hbWU6IHN0cmluZyk6IE9ic2VydmFibGU8dm9pZD4ge1xuICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyOiBPYnNlcnZlcjx2b2lkPikgPT4ge1xuICAgIGxldCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKGRiTmFtZSk7XG5cbiAgICByZXF1ZXN0Lm9uYmxvY2tlZCA9IChlKSA9PiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IG9ic2VydmVyLm5leHQodW5kZWZpbmVkKTtcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gIH0pLnBpcGUodGFrZSgxKSk7XG59XG5cbmV4cG9ydCBjb25zdCByeGlkYiA9IHsgb3BlbiwgZHJvcCB9O1xuIiwiaW1wb3J0IHsgU3ViamVjdCwgT2JzZXJ2YWJsZSwgUmVwbGF5U3ViamVjdCwgT2JzZXJ2ZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRha2UsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqXG4gKiBSZXNvbHZlIHJlcXVlc3QgYXMgYW4gT2JzZXJ2YWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcnhpZnlSZXF1ZXN0KHJlcXVlc3Q6IElEQlJlcXVlc3QpOiBPYnNlcnZhYmxlPGFueT4ge1xuICBsZXQgcmVxdWVzdCQ6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgcmVxdWVzdC5vbmVycm9yICAgPSAoZTogYW55KSA9PiByZXF1ZXN0JC5lcnJvcihlKTtcbiAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZTogYW55KSA9PiByZXF1ZXN0JC5uZXh0KGUpO1xuXG4gIHJldHVybiByZXF1ZXN0JDtcbn1cblxuLyoqXG4gKiBQaXBlIG9wZXJhdG9yIGZvciBleHRyYWN0aW5nIHJlc3VsdCBmcm9tIGlkYiBldmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzdWx0RnJvbUlEQkV2ZW50KHNvdXJjZTogT2JzZXJ2YWJsZTxhbnk+KSB7XG4gIHJldHVybiBzb3VyY2UucGlwZShcbiAgICBtYXAoKGU6IGFueSkgPT4gZS50YXJnZXQucmVzdWx0KVxuICApO1xufVxuIiwiaW1wb3J0IHsgcnhpZGIgfSBmcm9tICcuL3NyYy9yeGlkYi1zdGF0aWMnO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvcnhpZGIudHlwZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvcnhpZGItZGInO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvcnhpZGItc3RhdGljJztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL3J4aWRiLXN0b3JlJztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL3J4aWRiLXVwZ3JhZGUnO1xuXG5leHBvcnQgZGVmYXVsdCByeGlkYjtcbiJdLCJzb3VyY2VSb290IjoiIn0=