!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e){t.exports=rxjs/operators},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(6),i=function(){function t(t,e){this.name=t,this._db=e}return t.prototype.clear=function(){var t=this;return this.tx("readwrite").pipe(n.map(function(e){return e.objectStore(t.name)}),n.map(function(t){return t.clear()}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.delete=function(t){var e=this;return this.tx("readwrite").pipe(n.map(function(t){return t.objectStore(e.name)}),n.map(function(e){return e.delete(t)}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.get=function(t){var e=this;return this.tx().pipe(n.map(function(t){return t.objectStore(e.name)}),n.map(function(e){return e.get(t)}),n.switchMap(function(t){return o.rxifyRequest(t)}),o.resultFromIDBEvent)},t.prototype.set=function(t,e){var r=this;return this.tx("readwrite").pipe(n.map(function(t){return t.objectStore(r.name)}),n.map(function(r){return r.put(t,e)}),n.switchMap(function(t){return o.rxifyRequest(t)}),n.mapTo(void 0))},t.prototype.tx=function(t){return void 0===t&&(t="readonly"),this._db.tx(this.name,t)},t}();e.RxIDBStore=i},function(t,e){t.exports=rxjs},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o._name=e,o._rxidb=r,o._store=n,o}return o(e,t),e.prototype.createIndex=function(t,e,r){return this._store.createIndex(t,e,r)},e.prototype.fill=function(t){var e=this;return Array.from(t).forEach(function(t){return e._store.put(t)}),this},e}(r(1).RxIDBStore);e.RxIDBUpgradeStore=i;var u=function(){function t(t,e){this._rxidb=t,this._event=e,this.db=e.target.result,this.oldVersion=e.oldVersion,this.version=e.newVersion}return t.prototype.create=function(t,e){var r=this.db.createObjectStore(t,e);return new i(t,this._rxidb,r)},t.prototype.delete=function(t){this.db.deleteObjectStore(t)},t.prototype.has=function(t){return this.db.objectStoreNames.contains(t)},t}();e.RxIDBUpgrade=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=r(0),i=r(1),u=function(){function t(t){this.idb=t}return t.prototype.close=function(){this.idb.close()},t.prototype.get=function(t){return new i.RxIDBStore(t,this)},t.prototype.tx=function(t,e){var r=this;return void 0===e&&(e="readonly"),n.of(null).pipe(o.map(function(){return r.idb.transaction(t,e)}))},t.prototype.transaction=function(t,e){return void 0===e&&(e="readonly"),this.idb.transaction(t,e)},t}();e.RxIDB=u},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),u=r(0),c=r(4),a=r(3);function s(t,e,r){var n,o=new i.Subject,s=new i.Subject,p=indexedDB.open(t,e);return p.onerror=function(t){return o.error(t)},p.onblocked=function(t){return o.error(t)},p.onsuccess=function(t){n=n||new c.RxIDB(t.target.result),o.next(n),o.complete(),e===n.idb.version&&(s.next(),s.complete())},p.onupgradeneeded=function(t){n=n||new c.RxIDB(t.target.result),f(new a.RxIDBUpgrade(n,t),r).subscribe(function(){return s.next()},function(t){return s.error(t)},function(){return s.complete()})},i.forkJoin([o,s]).pipe(u.map(function(){return n}))}function f(t,e){return e&&e.length?i.forkJoin(e.map(function(e){return p(t,e)})):i.of(null)}function p(t,e){void 0===e&&(e=new Map);var r,u,c=t.oldVersion,a=[i.of(!0)];try{for(var s=n(e),f=s.next();!f.done;f=s.next()){var p=o(f.value,2),l=p[0],d=p[1];if(c<l){var v=d(t);v instanceof i.Observable&&a.push(v)}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(u=s.return)&&u.call(s)}finally{if(r)throw r.error}}return a}function l(t){return i.Observable.create(function(e){var r=indexedDB.deleteDatabase(t);r.onblocked=function(t){return e.error(t)},r.onsuccess=function(){return e.next(void 0)},r.onerror=function(t){return e.error(t)}}).pipe(u.take(1))}e.openDB=s,e.onUpgradeEnded=f,e.setupLayers=p,e.dropDB=l,e.rxidb={openDB:s,dropDB:l}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=r(0);e.rxifyRequest=function(t){var e=new n.Subject;return t.onerror=function(t){return e.error(t)},t.onsuccess=function(t){return e.next(t)},e},e.resultFromIDBEvent=function(t){return t.pipe(o.map(function(t){return t.target.result}))}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(4)),n(r(1)),n(r(3));var o=r(5);e.openDB=o.openDB,e.dropDB=o.dropDB}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicnhqcy9vcGVyYXRvcnNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvcnhpZGItc3RvcmUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicnhqc1wiIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi11cGdyYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi1kYi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcnhpZGItc3RhdGljLnRzIiwid2VicGFjazovLy8uL3NyYy9yeGlkYi11dGlscy50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicnhqcyIsIm9wZXJhdG9ycyIsIm9wZXJhdG9yc18xIiwicnhpZGJfdXRpbHNfMSIsIlJ4SURCU3RvcmUiLCJfZGIiLCJ0aGlzIiwiY2xlYXIiLCJfdGhpcyIsInR4IiwicGlwZSIsIm1hcCIsIm9iamVjdFN0b3JlIiwic3RvcmUiLCJzd2l0Y2hNYXAiLCJyZXEiLCJyeGlmeVJlcXVlc3QiLCJtYXBUbyIsInVuZGVmaW5lZCIsImRlbGV0ZSIsImtleSIsInJlc3VsdEZyb21JREJFdmVudCIsInNldCIsInB1dCIsIm1vZGUiLCJSeElEQlVwZ3JhZGVTdG9yZSIsIl9zdXBlciIsIl9uYW1lIiwiX3J4aWRiIiwiX3N0b3JlIiwiX19leHRlbmRzIiwiY3JlYXRlSW5kZXgiLCJrZXlwYXRoIiwicGFyYW1zIiwiZmlsbCIsImVudHJpZXMiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwiZW50cnkiLCJSeElEQlVwZ3JhZGUiLCJfZXZlbnQiLCJkYiIsInRhcmdldCIsInJlc3VsdCIsIm9sZFZlcnNpb24iLCJ2ZXJzaW9uIiwibmV3VmVyc2lvbiIsImNyZWF0ZSIsIm9wdGlvbnMiLCJjcmVhdGVPYmplY3RTdG9yZSIsImRlbGV0ZU9iamVjdFN0b3JlIiwiaGFzIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwicnhqc18xIiwicnhpZGJfc3RvcmVfMSIsIlJ4SURCIiwiaWRiIiwiY2xvc2UiLCJvZiIsInRyYW5zYWN0aW9uIiwicnhpZGJfZGJfMSIsInJ4aWRiX3VwZ3JhZGVfMSIsIm9wZW5EQiIsImRiTmFtZSIsImRiVmVyc2lvbiIsInN0b3JlcyIsInJ4SURCIiwiZGIkIiwiU3ViamVjdCIsInVwZ3JhZGUkIiwicmVxdWVzdCIsImluZGV4ZWREQiIsIm9wZW4iLCJvbmVycm9yIiwiZSIsImVycm9yIiwib25ibG9ja2VkIiwib25zdWNjZXNzIiwiZXZlbnQiLCJuZXh0IiwiY29tcGxldGUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvblVwZ3JhZGVFbmRlZCIsInN1YnNjcmliZSIsImZvcmtKb2luIiwicnhJREJVcGdyYWRlIiwibGVuZ3RoIiwibGF5ZXJzIiwic2V0dXBMYXllcnMiLCJNYXAiLCJvYnNlcnZhYmxlcyIsImxheWVyc18xIiwiX192YWx1ZXMiLCJsYXllcnNfMV8xIiwiZG9uZSIsIl9hIiwiX19yZWFkIiwibGF5ZXJWZXJzaW9uIiwibGF5ZXJJbnN0YWxsZXIiLCJPYnNlcnZhYmxlIiwicHVzaCIsImRyb3BEQiIsIm9ic2VydmVyIiwiZGVsZXRlRGF0YWJhc2UiLCJ0YWtlIiwicnhpZGIiLCJyZXF1ZXN0JCIsInNvdXJjZSIsIl9fZXhwb3J0IiwicnhpZGJfc3RhdGljXzEiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFB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IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJ4anMvb3BlcmF0b3JzOyIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCwgc3dpdGNoTWFwLCBtYXBUbyB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgUnhJREIgfSBmcm9tICcuL3J4aWRiLWRiJztcbmltcG9ydCB7IElSeElEQlN0b3JlIH0gZnJvbSAnLi9yeGlkYi5pbnRlcmZhY2VzJztcbmltcG9ydCB7IHJ4aWZ5UmVxdWVzdCwgcmVzdWx0RnJvbUlEQkV2ZW50IH0gZnJvbSAnLi9yeGlkYi11dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBSeElEQlN0b3JlPFRWYWx1ZSBleHRlbmRzIGFueSA9IGFueSwgVEtleSBleHRlbmRzIElEQlZhbGlkS2V5ID0gSURCVmFsaWRLZXk+IGltcGxlbWVudHMgSVJ4SURCU3RvcmUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxuICAgIHByaXZhdGUgX2RiOiBSeElEQlxuICApIHsgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy50eCgncmVhZHdyaXRlJykucGlwZShcbiAgICAgIG1hcCgodHgpID0+IHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSkpLFxuICAgICAgbWFwKChzdG9yZSkgPT4gc3RvcmUuY2xlYXIoKSksXG4gICAgICBzd2l0Y2hNYXAocmVxID0+IHJ4aWZ5UmVxdWVzdChyZXEpKSxcbiAgICAgIG1hcFRvKHVuZGVmaW5lZClcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZShrZXk6IFRLZXkpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy50eCgncmVhZHdyaXRlJykucGlwZShcbiAgICAgIG1hcCgodHgpID0+IHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSkpLFxuICAgICAgbWFwKChzdG9yZSkgPT4gc3RvcmUuZGVsZXRlKGtleSkpLFxuICAgICAgc3dpdGNoTWFwKHJlcSA9PiByeGlmeVJlcXVlc3QocmVxKSksXG4gICAgICBtYXBUbyh1bmRlZmluZWQpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQoa2V5OiBUS2V5KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy50eCgpLnBpcGUoXG4gICAgICBtYXAoKHR4KSA9PiB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpKSxcbiAgICAgIG1hcChzdG9yZSA9PiBzdG9yZS5nZXQoa2V5KSksXG4gICAgICBzd2l0Y2hNYXAocmVxID0+IHJ4aWZ5UmVxdWVzdChyZXEpKSxcbiAgICAgIHJlc3VsdEZyb21JREJFdmVudFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgc2V0KHZhbHVlOiBUVmFsdWUsIGtleT86IFRLZXkpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy50eCgncmVhZHdyaXRlJykucGlwZShcbiAgICAgIG1hcCgodHgpID0+IHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSkpLFxuICAgICAgbWFwKHN0b3JlID0+IHN0b3JlLnB1dCh2YWx1ZSwga2V5KSksXG4gICAgICBzd2l0Y2hNYXAocmVxID0+IHJ4aWZ5UmVxdWVzdChyZXEpKSxcbiAgICAgIG1hcFRvKHVuZGVmaW5lZClcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHR4KG1vZGU6ICdyZWFkb25seScgfCAncmVhZHdyaXRlJyA9ICdyZWFkb25seScpOiBPYnNlcnZhYmxlPElEQlRyYW5zYWN0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMuX2RiLnR4KHRoaXMubmFtZSwgbW9kZSk7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcnhqczsiLCJpbXBvcnQgeyBSeElEQiB9IGZyb20gJy4vcnhpZGItZGInO1xuaW1wb3J0IHsgUnhJREJTdG9yZSB9IGZyb20gJy4vcnhpZGItc3RvcmUnO1xuaW1wb3J0IHsgSVJ4SURCVXBncmFkZSB9IGZyb20gJy4vcnhpZGIuaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBSeElEQlVwZ3JhZGVTdG9yZSBleHRlbmRzIFJ4SURCU3RvcmU8YW55LCBJREJWYWxpZEtleT4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9uYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBfcnhpZGI6IFJ4SURCLFxuICAgIHByaXZhdGUgX3N0b3JlOiBJREJPYmplY3RTdG9yZVxuICApIHtcbiAgICBzdXBlcihfbmFtZSwgX3J4aWRiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgaW5kZXhcbiAgICovXG4gIHB1YmxpYyBjcmVhdGVJbmRleChuYW1lOiBzdHJpbmcsIGtleXBhdGg6IHN0cmluZywgcGFyYW1zPzogSURCSW5kZXhQYXJhbWV0ZXJzKTogSURCSW5kZXgge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5jcmVhdGVJbmRleChuYW1lLCBrZXlwYXRoLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGwgREIgd2l0aCBlbnRyaWVzXG4gICAqL1xuICBwdWJsaWMgZmlsbChlbnRyaWVzOiBJdGVyYWJsZTxhbnk+KTogdGhpcyB7XG4gICAgQXJyYXkuZnJvbShlbnRyaWVzKS5mb3JFYWNoKGVudHJ5ID0+IHRoaXMuX3N0b3JlLnB1dChlbnRyeSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSeElEQlVwZ3JhZGUgaW1wbGVtZW50cyBJUnhJREJVcGdyYWRlIHtcbiAgcHVibGljIHJlYWRvbmx5IGRiOiBJREJEYXRhYmFzZTtcbiAgcHVibGljIHJlYWRvbmx5IG9sZFZlcnNpb246IG51bWJlcjtcbiAgcHVibGljIHJlYWRvbmx5IHZlcnNpb246IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgcHJpdmF0ZSBfcnhpZGI6IFJ4SURCLFxuICAgIHByaXZhdGUgX2V2ZW50OiBhbnlcbiAgKSB7XG4gICAgdGhpcy5kYiAgICAgICAgID0gX2V2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgdGhpcy5vbGRWZXJzaW9uID0gX2V2ZW50Lm9sZFZlcnNpb247XG4gICAgdGhpcy52ZXJzaW9uICAgID0gX2V2ZW50Lm5ld1ZlcnNpb247XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlKG5hbWU6IHN0cmluZywgb3B0aW9ucz86IElEQk9iamVjdFN0b3JlUGFyYW1ldGVycyk6IFJ4SURCVXBncmFkZVN0b3JlIHtcbiAgICBsZXQgc3RvcmUgPSB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKG5hbWUsIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXcgUnhJREJVcGdyYWRlU3RvcmUobmFtZSwgdGhpcy5fcnhpZGIsIHN0b3JlKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUobmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5kYi5kZWxldGVPYmplY3RTdG9yZShuYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXMobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhuYW1lKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgSVJ4SURCIH0gZnJvbSAnLi9yeGlkYi5pbnRlcmZhY2VzJztcbmltcG9ydCB7IFJ4SURCU3RvcmUgfSBmcm9tICcuL3J4aWRiLXN0b3JlJztcblxuZXhwb3J0IGNsYXNzIFJ4SURCIGltcGxlbWVudHMgSVJ4SURCIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIHB1YmxpYyByZWFkb25seSBpZGI6IElEQkRhdGFiYXNlXG4gICkge31cblxuICAvKipcbiAgICogQ2xvc2UgZGJcbiAgICovXG4gIHB1YmxpYyBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlkYi5jbG9zZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmVhbTogZ2V0IHN0b3JlXG4gICAqL1xuICBwdWJsaWMgZ2V0KGtleTogc3RyaW5nKTogUnhJREJTdG9yZTxhbnksIElEQlZhbGlkS2V5PiB7XG4gICAgcmV0dXJuIG5ldyBSeElEQlN0b3JlKGtleSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU3RyZWFtOiBJREJUcmFuc2FjdGlvblxuICAgKi9cbiAgcHVibGljIHR4KHN0b3JlOiBzdHJpbmcgfCBzdHJpbmdbXSwgbW9kZTogJ3JlYWRvbmx5JyB8ICdyZWFkd3JpdGUnID0gJ3JlYWRvbmx5Jyk6IE9ic2VydmFibGU8SURCVHJhbnNhY3Rpb24+IHtcbiAgICByZXR1cm4gb2YobnVsbCkucGlwZShcbiAgICAgIG1hcCgoKSA9PiB0aGlzLmlkYi50cmFuc2FjdGlvbihzdG9yZSwgbW9kZSkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIElEQlRyYW5zYWN0aW9uXG4gICAqL1xuICBwdWJsaWMgdHJhbnNhY3Rpb24oc3RvcmU6IHN0cmluZ3xzdHJpbmdbXSwgbW9kZTogJ3JlYWRvbmx5J3wncmVhZHdyaXRlJyA9ICdyZWFkb25seScpOiBJREJUcmFuc2FjdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuaWRiLnRyYW5zYWN0aW9uKHN0b3JlLCBtb2RlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZm9ya0pvaW4sIFN1YmplY3QsIGZyb20sIG9mLCBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZSwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBSeElEQiB9IGZyb20gJy4vcnhpZGItZGInO1xuaW1wb3J0IHsgUnhJREJMYXllcnMgfSBmcm9tICcuL3J4aWRiLnR5cGVzJztcbmltcG9ydCB7IFJ4SURCVXBncmFkZSB9IGZyb20gJy4vcnhpZGItdXBncmFkZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuREIoZGJOYW1lOiBzdHJpbmcsIGRiVmVyc2lvbjogbnVtYmVyLCBzdG9yZXM/OiBSeElEQkxheWVyc1tdKTogT2JzZXJ2YWJsZTxSeElEQj4ge1xuICBsZXQgZGIkOiBTdWJqZWN0PFJ4SURCPiA9IG5ldyBTdWJqZWN0KCk7XG4gIGxldCB1cGdyYWRlJDogU3ViamVjdDx2b2lkPiA9IG5ldyBTdWJqZWN0KCk7XG4gIGxldCByZXF1ZXN0OiBJREJPcGVuREJSZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBkYlZlcnNpb24pO1xuICBsZXQgcnhJREI6IFJ4SURCO1xuXG4gIHJlcXVlc3Qub25lcnJvciAgICAgICAgID0gKGU6IGFueSkgPT4gZGIkLmVycm9yKGUpO1xuICByZXF1ZXN0Lm9uYmxvY2tlZCAgICAgICA9IChlOiBhbnkpID0+IGRiJC5lcnJvcihlKTtcbiAgcmVxdWVzdC5vbnN1Y2Nlc3MgICAgICAgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIHJ4SURCID0gcnhJREIgfHwgbmV3IFJ4SURCKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgIGRiJC5uZXh0KHJ4SURCKTtcbiAgICBkYiQuY29tcGxldGUoKTtcblxuICAgIGlmIChkYlZlcnNpb24gPT09IHJ4SURCLmlkYi52ZXJzaW9uKSB7XG4gICAgICB1cGdyYWRlJC5uZXh0KCk7XG4gICAgICB1cGdyYWRlJC5jb21wbGV0ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIHJ4SURCID0gcnhJREIgfHwgbmV3IFJ4SURCKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgIG9uVXBncmFkZUVuZGVkKG5ldyBSeElEQlVwZ3JhZGUocnhJREIsIGV2ZW50KSwgc3RvcmVzKS5zdWJzY3JpYmUoXG4gICAgICAoKSA9PiB1cGdyYWRlJC5uZXh0KCksXG4gICAgICAoZSkgPT4gdXBncmFkZSQuZXJyb3IoZSksXG4gICAgICAoKSA9PiB1cGdyYWRlJC5jb21wbGV0ZSgpXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gZm9ya0pvaW4oW2RiJCwgdXBncmFkZSRdKS5waXBlKFxuICAgIG1hcCgoKSA9PiByeElEQilcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uVXBncmFkZUVuZGVkKHJ4SURCVXBncmFkZTogUnhJREJVcGdyYWRlLCBzdG9yZXM/OiBSeElEQkxheWVyc1tdKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgaWYgKCFzdG9yZXMgfHwgIXN0b3Jlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gb2YobnVsbCk7XG4gIH1cblxuICByZXR1cm4gZm9ya0pvaW4oc3RvcmVzLm1hcChsYXllcnMgPT4gc2V0dXBMYXllcnMocnhJREJVcGdyYWRlLCBsYXllcnMpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cExheWVycyhyeElEQlVwZ3JhZGU6IFJ4SURCVXBncmFkZSwgbGF5ZXJzOiBSeElEQkxheWVycyA9IG5ldyBNYXAoKSk6IE9ic2VydmFibGU8YW55PltdIHtcbiAgbGV0IHsgb2xkVmVyc2lvbiB9ID0gcnhJREJVcGdyYWRlO1xuICBsZXQgb2JzZXJ2YWJsZXM6IE9ic2VydmFibGU8YW55PltdID0gW29mKHRydWUpXTtcblxuICBmb3IgKGNvbnN0IFtsYXllclZlcnNpb24sIGxheWVySW5zdGFsbGVyXSBvZiBsYXllcnMpIHtcbiAgICBpZiAob2xkVmVyc2lvbiA8IGxheWVyVmVyc2lvbikge1xuICAgICAgbGV0IHJlc3VsdCA9IGxheWVySW5zdGFsbGVyKHJ4SURCVXBncmFkZSk7XG5cbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XG4gICAgICAgIG9ic2VydmFibGVzLnB1c2gocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JzZXJ2YWJsZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcm9wREIoZGJOYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKChvYnNlcnZlcjogT2JzZXJ2ZXI8dm9pZD4pID0+IHtcbiAgICBsZXQgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpO1xuXG4gICAgcmVxdWVzdC5vbmJsb2NrZWQgPSAoZSkgPT4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiBvYnNlcnZlci5uZXh0KHVuZGVmaW5lZCk7XG4gICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IG9ic2VydmVyLmVycm9yKGUpO1xuICB9KS5waXBlKHRha2UoMSkpO1xufVxuXG5leHBvcnQgY29uc3QgcnhpZGIgPSB7IG9wZW5EQiwgZHJvcERCIH07XG4iLCJpbXBvcnQgeyBTdWJqZWN0LCBPYnNlcnZhYmxlLCBSZXBsYXlTdWJqZWN0LCBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZSwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG4vKipcbiAqIFJlc29sdmUgcmVxdWVzdCBhcyBhbiBPYnNlcnZhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByeGlmeVJlcXVlc3QocmVxdWVzdDogSURCUmVxdWVzdCk6IE9ic2VydmFibGU8YW55PiB7XG4gIGxldCByZXF1ZXN0JDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcblxuICByZXF1ZXN0Lm9uZXJyb3IgICA9IChlOiBhbnkpID0+IHJlcXVlc3QkLmVycm9yKGUpO1xuICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChlOiBhbnkpID0+IHJlcXVlc3QkLm5leHQoZSk7XG5cbiAgcmV0dXJuIHJlcXVlc3QkO1xufVxuXG4vKipcbiAqIFBpcGUgb3BlcmF0b3IgZm9yIGV4dHJhY3RpbmcgcmVzdWx0IGZyb20gaWRiIGV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRGcm9tSURCRXZlbnQoc291cmNlOiBPYnNlcnZhYmxlPGFueT4pIHtcbiAgcmV0dXJuIHNvdXJjZS5waXBlKFxuICAgIG1hcCgoZTogYW55KSA9PiBlLnRhcmdldC5yZXN1bHQpXG4gICk7XG59XG4iLCJleHBvcnQgKiBmcm9tICcuL3NyYy9yeGlkYi50eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9yeGlkYi1kYic7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9yeGlkYi1zdG9yZSc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9yeGlkYi11cGdyYWRlJztcbmV4cG9ydCB7IG9wZW5EQiwgZHJvcERCIH0gZnJvbSAnLi9zcmMvcnhpZGItc3RhdGljJztcbiJdLCJzb3VyY2VSb290IjoiIn0=